<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Clicker King: All Themes Fixed</title>
    <style>
        :root { --accent: #38bdf8; --bg: #0f172a; --gold: #f59e0b; --diamond: #00f2ff; --purple: #a855f7; --red: #ff4444; --admin: #22c55e; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Segoe UI', sans-serif; }
        
        body { background: var(--bg); color: white; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden; transition: 0.5s; }

        /* --- –°–¢–ò–õ–Ü –§–û–ù–Ü–í --- */
        .bg-ukraine { background: linear-gradient(to bottom, #0057b7 50%, #ffd700 50%) !important; }
        .bg-space { background: radial-gradient(circle, #1e1b4b, #000) !important; }
        .bg-neon { background: linear-gradient(135deg, #ff00ff, #00ffff) !important; }
        .bg-gold { background: radial-gradient(circle, #fff7ad, #ffa200) !important; }
        .bg-king { background: linear-gradient(45deg, #f59e0b, #78350f, #facc15) !important; animation: shine 3s infinite alternate; }
        @keyframes shine { from { filter: brightness(1); } to { filter: brightness(1.2); } }

        .card { background: rgba(15, 23, 42, 0.95); padding: 20px; border-radius: 30px; width: 95%; max-width: 400px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(15px); }
        .income-info { font-size: 0.8rem; color: #4ade80; margin-bottom: 10px; font-weight: bold; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 12px; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
        .stat-item { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.05); }
        .stat-val { font-size: 0.9rem; font-weight: 900; display: block; }

        #click-btn { width: 110px; height: 110px; border-radius: 50%; border: none; background: var(--accent); color: white; font-weight: 900; font-size: 1.2rem; cursor: pointer; box-shadow: 0 8px 25px rgba(56,189,248,0.4); margin: 10px auto 15px; transition: 0.1s; }
        #click-btn:active { transform: scale(0.9); }

        .tabs { display: grid; grid-template-columns: repeat(4, 1fr); gap: 4px; margin-bottom: 15px; }
        .tabs.admin-active { grid-template-columns: repeat(5, 1fr); }
        .tab-btn { padding: 10px 2px; border: none; border-radius: 8px; background: #334155; color: white; font-size: 0.65rem; font-weight: bold; cursor: pointer; }
        .tab-btn.active { background: var(--accent); }

        .section { display: none; flex-direction: column; gap: 8px; max-height: 250px; overflow-y: auto; padding-right: 5px; }
        .section.active { display: flex; }

        .row { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.04); padding: 12px; border-radius: 15px; }
        .action-btn { background: #22c55e; border: none; color: white; padding: 8px 12px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 0.75rem; min-width: 85px; }
        .action-btn:disabled { background: #1e293b; color: #475569; }
        .btn-owned { background: var(--purple) !important; }
        
        input { width: 100%; padding: 12px; border-radius: 12px; border: none; background: rgba(255,255,255,0.1); color: white; text-align: center; margin-bottom: 10px; }
    </style>
</head>
<body id="main-bg">

<div class="card">
    <div class="stats-grid">
        <div class="stat-item"><span style="font-size:0.55rem; opacity:0.6;">–ì–†–û–®–Ü</span><span id="bal-c" class="stat-val" style="color:var(--accent)">0</span></div>
        <div class="stat-item"><span style="font-size:0.55rem; opacity:0.6;">–ì–ï–ú–ò</span><span id="bal-d" class="stat-val" style="color:var(--diamond)">0</span></div>
    </div>

    <div id="income-display" class="income-info">–î–æ—Ö—ñ–¥: +0</div>
    
    <button id="click-btn" onclick="doClick()">–ö–õ–Ü–ö</button>

    <div id="tab-bar" class="tabs">
        <button class="tab-btn active" onclick="tab('up', this)">–°–∏–ª–∞</button>
        <button class="tab-btn" onclick="tab('th', this)">–§–æ–Ω–∏</button>
        <button class="tab-btn" onclick="tab('cd', this)">–ö–æ–¥–∏</button>
        <button id="admin-tab-btn" class="tab-btn" style="display:none; color:var(--admin)" onclick="tab('ad', this)">‚ö°</button>
        <button class="tab-btn" onclick="tab('st', this)">‚öôÔ∏è</button>
    </div>

    <div id="up" class="section active">
        <div class="row"><div>–°–∏–ª–∞<br><small id="p-lvl">–õ–≤–ª 1</small></div><button class="action-btn" id="btn-p" onclick="buyP()">10</button></div>
        <div class="row"><div>Rebirth (Max 100)<br><small id="r-lvl" style="color:var(--gold)">0</small></div><button class="action-btn" id="btn-r" onclick="doRebirth()">1M</button></div>
        <button class="action-btn" id="btn-max" style="background:var(--purple); width: 100%;" onclick="buyMax()">–ö–£–ü–ò–¢–ò MAX –°–ò–õ–£</button>
    </div>

    <div id="th" class="section">
        <div class="row"><span>üåå –ö–æ—Å–º–æ—Å (x1.5)</span><button class="action-btn" id="btn-bg-space" onclick="buyTheme('bg-space', 5000, 'c')">5K</button></div>
        <div class="row"><span>üá∫üá¶ –£–∫—Ä–∞—ó–Ω–∞ (x2)</span><button class="action-btn" id="btn-bg-ukraine" onclick="buyTheme('bg-ukraine', 15000, 'c')">15K</button></div>
        <div class="row"><span>üåà –ù–µ–æ–Ω (x15)</span><button class="action-btn" id="btn-bg-neon" onclick="buyTheme('bg-neon', 200, 'd')">200 üíé</button></div>
        <div class="row"><span>‚ú® –ó–æ–ª–æ—Ç–æ (x50)</span><button class="action-btn" id="btn-bg-gold" onclick="buyTheme('bg-gold', 1000, 'd')">1K üíé</button></div>
        <div id="k-row" class="row" style="display:none; border:1px solid var(--gold)"><span>üëë KING (+999 Sx)</span><button class="action-btn" id="btn-bg-king" onclick="setT('bg-king')">–û–ë–†–ê–¢–ò</button></div>
        <div class="row"><span>üåë –°—Ç–∞–Ω–¥–∞—Ä—Ç</span><button class="action-btn" onclick="setT('')">–û–ë–†–ê–¢–ò</button></div>
    </div>

    <div id="cd" class="section">
        <input type="text" id="promo" placeholder="–í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ —Ç—É—Ç...">
        <button class="action-btn" style="width:100%;" onclick="applyCode()">–ê–ö–¢–ò–í–£–í–ê–¢–ò</button>
    </div>

    <div id="ad" class="section">
        <button class="action-btn" style="background:var(--admin); width:100%" onclick="state.c += 1e21; u();">+100 –°–µ–∫—Å—Ç–∏–ª—å–π–æ–Ω—ñ–≤</button>
        <button class="action-btn" style="background:var(--admin); width:100%; margin-top:5px;" onclick="state.rb = 100; state.p = 1e21; u();">–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ú–∞–∫—Å –õ—ñ–º—ñ—Ç–∏</button>
        <button class="action-btn" style="background:var(--admin); width:100%; margin-top:5px;" onclick="state.d += 1000000; u();">+1M –ì–µ–º—ñ–≤</button>
    </div>

    <div id="st" class="section">
        <button class="action-btn" style="background:var(--red); width:100%" onclick="hardReset()">–ü–û–í–ù–ï –°–ö–ò–ù–£–¢–ò –í–°–ï</button>
    </div>
</div>

<script>
    let state = {
        c: parseFloat(localStorage.getItem('c_v14')) || 0,
        d: parseFloat(localStorage.getItem('d_v14')) || 0,
        p: parseFloat(localStorage.getItem('p_v14')) || 1,
        cs: parseFloat(localStorage.getItem('cs_v14')) || 10,
        rb: parseInt(localStorage.getItem('rb_v14')) || 0,
        th: JSON.parse(localStorage.getItem('th_v14')) || [],
        ct: localStorage.getItem('ct_v14') || '',
        admin: localStorage.getItem('admin_v14') === 'true'
    };

    const LIMIT_RB = 100;
    const LIMIT_P = 1e21; // 1 Sextillion
    const boosts = { 'bg-space': 1.5, 'bg-ukraine': 2, 'bg-neon': 15, 'bg-gold': 50, 'bg-king': 1 };

    function f(n) {
        if (n >= 1e21) return (n/1e21).toFixed(1) + "Sx";
        if (n >= 1e15) return (n/1e15).toFixed(1) + "Qd";
        if (n >= 1e12) return (n/1e12).toFixed(1) + "T";
        if (n >= 1e9) return (n/1e9).toFixed(1) + "B";
        if (n >= 1e6) return (n/1e6).toFixed(1) + "M";
        return Math.floor(n).toLocaleString();
    }

    function u() {
        document.getElementById('bal-c').innerText = f(state.c);
        document.getElementById('bal-d').innerText = f(state.d);
        
        let m = Math.pow(2, state.rb) * (boosts[state.ct] || 1);
        let inc = state.p * m;
        if(state.ct === 'bg-king') inc += 999e21;
        document.getElementById('income-display').innerText = "–ö–ª—ñ–∫: +" + f(inc);

        // –°–∏–ª–∞
        document.getElementById('p-lvl').innerText = "–°–∏–ª–∞: " + f(state.p);
        let btnP = document.getElementById('btn-p');
        if(state.p >= LIMIT_P) { btnP.innerText = "MAX"; btnP.disabled = true; } 
        else { btnP.innerText = f(state.cs); btnP.disabled = state.c < state.cs; }

        // Rebirth
        document.getElementById('r-lvl').innerText = state.rb;
        let btnR = document.getElementById('btn-r');
        let rCost = 1e6 * Math.pow(10, state.rb);
        if(state.rb >= LIMIT_RB) { btnR.innerText = "MAX"; btnR.disabled = true; }
        else { btnR.innerText = f(rCost); btnR.disabled = state.c < rCost; }

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ–æ–Ω—ñ–≤
        ['bg-space', 'bg-ukraine', 'bg-neon', 'bg-gold', 'bg-king'].forEach(tid => {
            let b = document.getElementById('btn-' + tid);
            if(b && state.th.includes(tid)) {
                b.innerText = "–û–ë–†–ê–¢–ò";
                b.classList.add('btn-owned');
            }
        });

        if(state.admin) {
            document.getElementById('admin-tab-btn').style.display = 'block';
            document.getElementById('tab-bar').classList.add('admin-active');
        }

        document.getElementById('main-bg').className = state.ct;
        if(state.th.includes('bg-king')) document.getElementById('k-row').style.display = 'flex';

        // Save
        localStorage.setItem('c_v14', state.c); localStorage.setItem('d_v14', state.d);
        localStorage.setItem('p_v14', state.p); localStorage.setItem('cs_v14', state.cs);
        localStorage.setItem('rb_v14', state.rb); localStorage.setItem('th_v14', JSON.stringify(state.th));
        localStorage.setItem('ct_v14', state.ct); localStorage.setItem('admin_v14', state.admin);
    }

    function doClick() {
        let m = Math.pow(2, state.rb) * (boosts[state.ct] || 1);
        let gain = state.p * m;
        if(state.ct === 'bg-king') gain += 999e21;
        state.c += gain; u();
    }

    function buyP() {
        if(state.c >= state.cs && state.p < LIMIT_P) {
            state.c -= state.cs; state.p *= 1.6; state.cs *= 1.9;
            if(state.p > LIMIT_P) state.p = LIMIT_P;
            u();
        }
    }

    function buyMax() {
        for(let i=0; i<50; i++) { if(state.c >= state.cs && state.p < LIMIT_P) buyP(); else break; }
    }

    function doRebirth() {
        let cost = 1e6 * Math.pow(10, state.rb);
        if(state.c >= cost && state.rb < LIMIT_RB) {
            state.rb++; state.c = 0; state.p = 1; state.cs = 10; state.d += 100; u();
        }
    }

    function buyTheme(id, pr, ty) {
        if(state.th.includes(id)) { state.ct = id; }
        else {
            if(ty === 'c' && state.c >= pr) { state.c -= pr; state.th.push(id); state.ct = id; }
            else if(ty === 'd' && state.d >= pr) { state.d -= pr; state.th.push(id); state.ct = id; }
        }
        u();
    }

    function applyCode() {
        let val = document.getElementById('promo').value;
        if(val === 'admin123') { state.admin = true; alert("–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å –≤—ñ–¥—á–∏–Ω–µ–Ω–∞!"); }
        if(val.toUpperCase() === 'KING') { state.th.push('bg-king'); state.ct = 'bg-king'; }
        document.getElementById('promo').value = ''; u();
    }

    function setT(id) { state.ct = id; u(); }
    function tab(id, btn) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active'); btn.classList.add('active');
    }
    function hardReset() { if(confirm("–í–∏–¥–∞–ª–∏—Ç–∏ –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å?")) { localStorage.clear(); location.reload(); } }

    u();
</script>
</body>
</html>